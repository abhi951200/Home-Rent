/*! For license information please see sdk.inapp.cdnHelper.js.LICENSE.txt */
(()=>{var e={877:(e,t,o)=>{var a=o(570),n=o(171);(o=n).v1=a,o.v4=n,e.exports=o},327:e=>{for(var t=[],o=0;o<256;++o)t[o]=(o+256).toString(16).substr(1);e.exports=function(e,o){var a=o||0;return[(o=t)[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[+a]]].join("")}},217:e=>{var t,o,a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);a?(t=new Uint8Array(16),e.exports=function(){return a(t),t}):(o=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o})},570:(e,t,o)=>{var a,n,s=o(217),i=o(327),r=0,l=0;e.exports=function(e,t,o){var c=t&&o||0,g=t||[],d=(e=e||{}).node||a,u=void 0!==e.clockseq?e.clockseq:n;null!=d&&null!=u||(h=s(),null==d&&(d=a=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==u&&(u=n=16383&(h[6]<<8|h[7])));var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=(o=void 0!==e.nsecs?e.nsecs:l+1,p-r+(o-l)/1e4);if(h<0&&void 0===e.clockseq&&(u=u+1&16383),1e4<=(o=(h<0||r<p)&&void 0===e.nsecs?0:o))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=p,n=u,o=(1e4*(268435455&(p+=122192928e5))+(l=o))%4294967296,g[c++]=o>>>24&255,g[c++]=o>>>16&255,g[c++]=o>>>8&255,g[c++]=255&o,p=p/4294967296*1e4&268435455,g[c++]=p>>>8&255,g[c++]=255&p,g[c++]=p>>>24&15|16,g[c++]=p>>>16&255,g[c++]=u>>>8|128,g[c++]=255&u;for(var m=0;m<6;++m)g[c+m]=d[m];return t||i(g)}},171:(e,t,o)=>{var a=o(217),n=o(327);e.exports=function(e,t,o){var s=t&&o||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var r=0;r<16;++r)t[s+r]=i[r];return t||n(i)}}},t={};function o(a){var n=t[a];return void 0!==n||(n=t[a]={exports:{}},e[a](n,n.exports,o)),n.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";function e(t,o,a){return null!=t&&o?(t=t[(o=Array.isArray(o)?o:o.split("."))[0]])&&1<o.length?e(t,o.slice(1),a):void 0===t?a||null:t:null}o.r(a);var t=o(877);class n{constructor(e,t){this.channel=e,this.target=t}sendMessage(e,o){return new Promise(((a,n)=>{var s={id:(0,t.v4)(),channel:this.channel,topic:e,message:o};this.addToListener(s,a,n),this.target instanceof HTMLIFrameElement?this.target.contentWindow.postMessage(s,this.target.src):this.target.postMessage(s,"*")}))}static listenToChannel(e,t,o){window.addEventListener("message",(a=>{a.data&&a.data.channel&&a.data.topic&&a.data.channel===e&&a.data.topic===t&&o(a.data,(o=>{o={id:a.data.id,channel:e,topic:t,message:o},a.source.postMessage(o,a.origin)}))}))}addToListener(t,o,a){n.pendingPromises[t.id]={resolve:o,reject:a},window.addEventListener("message",(t=>{t.data&&e(t.data,"channel",null)===this.channel&&null!=n.pendingPromises[t.data.id]&&(n.pendingPromises[t.data.id].resolve(t.data),delete n.pendingPromises[t.data.id])}))}}n.pendingPromises={};const s="initData",i="unifiedLogs",r={USER_DATA:"USER_DATA",PUSH_TOKEN:"PUSH_TOKEN",SUBSCRIPTION_DETAILS:"SUBSCRIPTION_DETAILS",SETUP_TIME:"SETUP_TIME",OPT_IN_SHOWN_TIME:"OPT_IN_SHOWN_TIME",SOFT_ASK_STATUS:"SOFT_ASK_STATUS",HARD_ASK_STATUS:"HARD_ASK_STATUS",WEB_SETTINGS:"WEB_SETTINGS",GRACEFUL_DATA:"GRACEFUL_DATA",Q:{PREFIX:"Q",REPORT:"REPORT",DEVICE:"DEVICE"},INIT_DATA:"INIT_DATA",OLD_SDK:{USER_DATA:"moengage_data",SUBSCRIPTION_DETAILS:"MOE_PUSH_ENDPOINT",PUSH_TOKEN:"MOE_PUSH_TOKEN"},BROWSER_DETAILS:"browserDetails",SESSION:"SESSION"},l=2,c=["USER_ATTRIBUTE_UNIQUE_ID","USER_ID_MODIFIED_FROM","USER_ATTRIBUTE_USER_EMAIL","USER_ATTRIBUTE_USER_MOBILE"],g={DC_1:"sdk-01.moengage.com",DC_2:"sdk-02.moengage.com",DC_3:"sdk-03.moengage.com",DC_4:"sdk-04.moengage.com",DC_5:"sdk-05.moengage.com",DC_6:"sdk-06.moengage.com",DC_100:"sdk-100.moengage.com",eu:"sdk-02.moengage.com",in:"sdk-03.moengage.com"},d="web_personalization",u={CLICK:"MOE_ONSITE_MESSAGE_CLICKED",IMPRESSION:"MOE_ONSITE_MESSAGE_SHOWN",DISMISS:"MOE_ONSITE_MESSAGE_DISMISSED",AUTO_DISMIS:"MOE_ONSITE_MESSAGE_AUTO_DISMISS",TYPE:"onsite"},p="moe_inapp_draft_type",h="moe_inapp_draft_id",m="moe_inapp_draft_tag",S="test_campaign_meta",_="test_template_type",f="moe_inapp_draft_variation",b="moe_inapp_draft_locale";var I;u.CLICK,u.IMPRESSION,u.DISMISS,u.AUTO_DISMIS;class T{static set(e,t){T.baseLogTag,window&&(window.moeInternals?window.moeInternals.ephemeral||(window.moeInternals.ephemeral={}):(window.moeInternals={},window.moeInternals.ephemeral={}),window.moeInternals.ephemeral[e]=t)}static get(t){return e(window,"moeInternals.ephemeral."+t,null)}}T.baseLogTag="EphemeralStorage";class v{constructor(){this.items=[]}static enqueue(e,t){e=v.getLocalStorageQName(e);let o=new v;C.get(e)&&(o=C.get(e)),o.items.push(t),o.items=o.items.slice(Math.max(o.items.length-50,0)),C.set(e,o)}static dequeue(e){e=v.getLocalStorageQName(e);const t=C.get(e);let o=null;return t&&0<t.items.length&&(o=t.items[0],t.items.splice(0,1),C.set(e,t)),o}static isEmpty(e){return e=v.getLocalStorageQName(e),!(C.get(e)&&0<C.get(e).items.length)}static purge(e){var t=v.getLocalStorageQName(e);v.isEmpty(e)||C.remove(t)}static getLocalStorageQName(e){return r.Q.PREFIX+"_"+e}}const E="MOE_DATA";class C{static setPrefix(e){C.prefix=e+"_"}static set(e,t){if(C.baseLogTag,e=C.prefix+e,localStorage){const o=C.getMoeData();o[e]=t,localStorage.setItem(E,JSON.stringify(o))}var o=C.KEYS_SHARED_WITH_COOKIE.indexOf(e);if(C.isSharedWithCookie&&0<=o){const a="object"!=typeof t||Array.isArray(t)?t:Object.assign({},t);0===o&&Array.isArray(a.attributes)&&(a.attributes=a.attributes.filter((e=>!!c.includes(e.key)))),e===r.SUBSCRIPTION_DETAILS&&(a.domain=t.domain,a.token=t.token,a.endpoint=t.endpoint,a.keys=t.keys),K.set(e,a)}}static get(t){return C.baseLogTag,t=C.prefix+t,localStorage?e(C.getMoeData(),t,null):null}static remove(e){var t=C.baseLogTag+".remove",o=C.prefix+e;if(localStorage&&null!=C.get(e)){const a=C.getMoeData();delete a[o],localStorage.setItem(E,JSON.stringify(a)),B.log(2,t,"Key",e,"removed.")}C.isSharedWithCookie&&0<=C.KEYS_SHARED_WITH_COOKIE.indexOf(e)&&K.remove(e)}static logout(){const e=["INIT_DATA","Q","WEB_SETTINGS","SUBSCRIPTION_DETAILS","PUSH_TOKEN","GRACEFUL_DATA"];for(const t in r)e.indexOf(t)<0&&C.remove(r[t]);for(const e in r.Q)v.purge(e)}static getString(e){if(e=C.prefix+e,localStorage)return"string"==typeof(e=C.get(e))||e instanceof String?e:JSON.stringify(e)}static removePrefix(){C.prefix=""}static copyKeysFromCookie(){for(let o=0;o<C.KEYS_SHARED_WITH_COOKIE.length;o++){var e=C.KEYS_SHARED_WITH_COOKIE[o],t=K.get(e);if(null!=t){const o="object"!=typeof t||Array.isArray(t)?t:Object.assign({},t);if(e===r.USER_DATA&&(t=C.get(e)&&C.get(e).attributes,Array.isArray(o.attributes)&&Array.isArray(t)&&0<t.length)){let e=[...t];o.attributes.forEach((t=>{var o=e.findIndex((e=>e.key===t.key));0<=o?e[o]=t:e.push(t)})),e=e.filter((e=>!(c.includes(e.key)&&o.attributes.findIndex((t=>t.key===e.key))<0))),o.attributes=e}C.set(e,o)}}C.removeStaleKeysFromLS()}static removeStaleKeysFromLS(){var e=C.baseLogTag+".removeStaleKeysFromLS";try{Object.keys(C.getMoeData()).forEach((e=>{this.KEYS_SHARED_WITH_COOKIE.includes(e)&&!K.get(e)&&C.remove(e)}))}catch(t){B.error(1,e,t)}}static getMoeData(){var e=C.baseLogTag+".getMoeData",t=localStorage.getItem(E);if(null==t)return{};try{return JSON.parse(t)}catch(t){return B.error(1,e,t),{}}}}C.baseLogTag="PersistentStorage",C.prefix="",C.isSharedWithCookie=!1,C.KEYS_SHARED_WITH_COOKIE=[r.USER_DATA,r.SUBSCRIPTION_DETAILS,r.SOFT_ASK_STATUS,r.PUSH_TOKEN,r.OPT_IN_SHOWN_TIME,r.HARD_ASK_STATUS,r.SESSION];class A{constructor(t){var o=A.baseLogTag+".constructor";t.placeholder||B.warn(1,o,"Placeholder for cards inbox not passed in cardsConfig: ",t),this.placeholder=e(t,"placeholder",""),this.enable=e(t,"enable",!1),this.overLayColor=e(t,"overLayColor","rgba(0, 0, 0, 0.8)"),this.backgroundColor=e(t,"backgroundColor","#F6FBFC"),this.navigationBar=new w(e(t,"navigationBar",{})),this.closeButton=new L(e(t,"closeButton",{})),this.tab=new O(e(t,"tab",{})),this.cardDismiss=new k(e(t,"cardDismiss",{})),this.optionButtonColor=e(t,"optionButtonColor","#C4C4C4"),this.dateTimeColor=e(t,"dateTimeColor","#8E8E8E"),this.unclickedCardIndicatorColor=e(t,"unclickedIndicatorColor","blue"),this.pinIcon=e(t,"pinIcon","https://app-cdn.moengage.com/sdk/pin-icon.svg"),this.refreshIcon=e(t,"refreshIcon","https://app-cdn.moengage.com/sdk/refresh-icon.svg"),this.webFloating=new R(e(t,"webFloating",{})),this.mWebFloating=new R(e(t,"mWebFloating",{countBackgroundColor:"#FF5A5F",enable:!1,icon:"https://app-cdn.moengage.com/sdk/bell-icon.svg",countColor:"#fff",postion:"0px 10px 40px 0",iconBackgroundColor:"#D9DFED"})),this.card=new D(e(t,"card",{})),this.errorContent=new y(e(t,"errorContent",{})),this.noDataContent=new N(e(t,"noDataContent",{})),this.openInbox=e(t,"openInbox",(()=>{})),this.zIndex=e(t,"zIndex","999999"),this.fontFaces=(null===(t=t.fontFaces)||void 0===t?void 0:t.map((e=>new x(e))))||[]}}A.baseLogTag="CardsConfigModel";class w{constructor(t){this.backgroundColor=e(t,"backgroundColor","#00237C"),this.text=e(t,"text","Notification"),this.color=e(t,"color","#fff"),this.fontSize=e(t,"fontSize","16px"),this.fontFamily=e(t,"fontFamily","inherit")}}class y{constructor(t={}){this.img=e(t,"img","https://app-cdn.moengage.com/sdk/cards-error.svg"),this.text=e(t,"text",'Error something went wrong <button onclick="window.location.reload();" style="color: #06A6B7; display: contents;" class="btn-icon pointer-cursor" >Refresh</button>')}}class D{constructor(t){this.headerFontSize=e(t,"headerFontSize","16px"),this.descriptionFontSize=e(t,"descriptionFontSize","14px"),this.ctaFontSize=e(t,"ctaFontSize","12px"),this.fontFamily=e(t,"fontFamily","inherit"),this.horizontalRowColor=e(t,"horizontalRowColor","#D9DFED")}}class L{constructor(t){this.mWebIcon=e(t,"mWebIcon","https://app-cdn.moengage.com/sdk/back-icon.svg"),this.webIcon=e(t,"webIcon","https://app-cdn.moengage.com/sdk/cross-icon.svg"),this.callBack=e(t,"callBack",(()=>{}))}}class O{constructor(t){this.inactiveTabFontColor=e(t,"inactiveTabFontColor","#7C7C7C"),this.fontSize=e(t,"fontSize","14px"),this.fontFamily=e(t,"fontFamily","inherit"),this.backgroundColor=e(t,"backgroundColor","#F6FBFC"),this.active=new P(e(t,"active",{}))}}class k{constructor(t){this.color=e(t,"color","red"),this.enable=e(t,"enable",!1)}}class x{constructor(t){this.family=e(t,"family",""),this.url=e(t,"url","")}}class P{constructor(t){this.color=e(t,"color","#06A6B7"),this.underlineColor=e(t,"underlineColor","#06A6B7"),this.backgroundColor=e(t,"backgroundColor","transparent")}}class R{constructor(t){this.enable=e(t,"enable",!1),this.icon=e(t,"icon","https://app-cdn.moengage.com/sdk/bell-icon.svg"),this.postion=e(t,"postion","0px 10px 40px 0"),this.countBackgroundColor=e(t,"countBackgroundColor","#FF5A5F"),this.countColor=e(t,"countColor","#fff"),this.zIndex=e(t,"zIndex","999998"),this.iconBackgroundColor=e(t,"iconBackgroundColor","#D9DFED"),this.fontFamily=e(t,"fontFamily","inherit")}}class N{constructor(t){this.img=e(t,"img","https://app-cdn.moengage.com/sdk/cards-no-result.svg"),this.text=e(t,"text","No notifications to show, check again later.")}}class U{constructor(t){this.debugLevel=0,this.cluster=null,this.environment=null,this.baseDomainName="https://sdk-01.moengage.com/",this.inapp=null,this.customSoftAsk=null;var o=U.baseLogTag+".constructor";null!=e(t,"app_id",null)?(this.appId=e(t,"app_id",null),this.integrationType=I.OLD_SDK):null!=e(t,"appId",null)?(this.appId=e(t,"appId",null),this.integrationType=I.NEW_SDK):(B.error(1,o,"App Id not specified. Please check docs page to complete the integration - ","https://docs.moengage.com/docs/web-sdk-integration"),this.integrationType=null),null!=e(t,"debug_logs",null)?this.debugLevel=e(t,"debug_logs",0):null!=e(t,"debugLevel",null)?this.debugLevel=e(t,"debugLevel",0):(B.log(2,o,"No log level config found. Using default value of",0),this.debugLevel=0),this.appId&&(this.baseDomainName="https://sdk-01.moengage.com/",this.forceSwUpdate=e(t,"forceSwUpdate",!1),this.cluster=e(t,"cluster",this.cluster),this.cluster&&null!=g[this.cluster]&&(this.environment=g[this.cluster]),e(t,"environment",null)&&(this.environment=t.environment),this.environment&&(this.baseDomainName="https://"+this.environment+"/"),0<this.debugLevel&&this.appId.indexOf("_DEBUG")<0?this.appId=this.appId+"_DEBUG":0===this.debugLevel&&0<=this.appId.indexOf("_DEBUG")&&(this.appId=this.appId.substr(0,this.appId.indexOf("_DEBUG"))),this.swPath=e(t,"swPath",null),null!=t.customSoftAsk?this.customSoftAsk={mainClass:e(t,"customSoftAsk.mainClass",null),allowClass:e(t,"customSoftAsk.allowClass",null),dismissClass:e(t,"customSoftAsk.dismissClass",null)}:this.customSoftAsk={mainClass:e(t,"main_class",null),allowClass:e(t,"allow_class",null),dismissClass:e(t,"block_class",null)},null!=e(t,"inapp.host",null)&&(this.inapp={host:e(t,"inapp.host",null)}),null!=e(t,"swScope",null)&&(this.swScope=e(t,"swScope",null)),null!=e(t,"disable_onsite",null)&&(this.disableOnsite=e(t,"disable_onsite",!1)),null!=e(t,"enableSPA",null)&&(this.enableSPA=e(t,"enableSPA",!1)),null!=e(t,"cards",null)&&(this.cards=new A(e(t,"cards",{}))),null!=e(t,"api_proxy_domain",null)&&(this.apiProxyDomain=e(t,"api_proxy_domain",null),this.baseDomainName="https://"+this.apiProxyDomain+"/",this.environment=this.apiProxyDomain),null!=e(t,"disable_web_push",null)&&(this.disableWebPush=e(t,"disable_web_push",!1)),null!=e(t,"disableCookies",null)&&(this.disableCookies=e(t,"disableCookies",!1)))}static save(e){T.set(s,new U(e)),C.set(r.INIT_DATA,new U(e))}static get(){return T.get(s)}static setSoftAskConfig(t){var o=U.get();t={appId:o.appId,debugLevel:o.debugLevel,cluster:o.cluster,environment:o.environment,swPath:o.swPath,enableSPA:o.enableSPA,cards:o.cards,apiProxyDomain:o.apiProxyDomain,disableCookies:o.disableCookies,customSoftAsk:{mainClass:e(t,"main_class",e(t,"mainClass",null)),allowClass:e(t,"allow_class",e(t,"allowClass",null)),dismissClass:e(t,"block_class",e(t,"dismissClass",null))}},U.save(t)}}U.baseLogTag="InitData",(H=I=I||{}).OLD_SDK="OLD_SDK",H.NEW_SDK="NEW_SDK";class F{static logData(e,t){return{log_type:e,sent_time:(new Date).toISOString(),lake_fields:t}}static setRemoteLogging(e){return this.isTrackingEnabled||(this.logLevel=null==e?void 0:e.configs.logLevel,this.isTrackingEnabled=e.configs.remoteLogTracking,this.isTrackingEnabled)}static log(e,t,o,a,...n){!this.isTrackingEnabled||e!==this.logLevel&&"verbose"!==this.logLevel||window[window.moengage_object||"Moengage"].remoteLogs.addRemoteLogs(this.logData(e,{msg:o+[...n].toString(),file_name:t,trace:a}))}}let M="color: white; background: #41AE55; border-radius: 5px;";class B{static setLogLevel(e,t){var o=B.baseLogTag+".setLogLevel";null==T.get(i)&&T.set(i,[]),null==e?B.logLevel=0:e in[0,1,2]?0<(B.logLevel=e)&&t&&B.releaseAllLogs():B.warn(0,o,"Value",e,"not supported for setDebugLevel(). Current log level is",B.logLevel,". Debug level can only be [0, 1, 2]")}static setLogTabStyle(e){B.tagLogStyle=B.tagLogStyle.replace("#48beab",e)}static log(e,t,o,...a){e<=B.logLevel?console.log("%c "+B.logBrand+" %c %c info %c %c "+t+" ",M,"","color: white; background: #18a0bf; border-radius: 5px;","",B.tagLogStyle,o,...a):B.cacheLog((()=>{B.log(e,t,o,...a)}))}static remoteLogTracking(e,t,o,a,...n){F.log(t,o,a,...n),this.log(e,o,a,...n)}static error(e,t,o,...a){var n;null!==(n=a[a.length-1])&&void 0!==n&&n.isCached||F.log("error",t,o,...a),e<=B.logLevel?console.error("%c "+B.logBrand+" %c %c error %c %c "+t+" ",M,"","color: white; background: #cc0a0a; border-radius: 5px;","",B.tagLogStyle,o,...a.slice(0,-1)):B.cacheLog((()=>{B.error(e,t,o,...a,{isCached:!0})}))}static warn(e,t,o,...a){var n;null!==(n=a[a.length-1])&&void 0!==n&&n.isCached||F.log("warning",t,o,...a),e<=B.logLevel?console.warn("%c "+B.logBrand+" %c %c warn %c %c "+t+" ",M,"","color: white; background: #e8ab51; border-radius: 5px;","",B.tagLogStyle,o,...a.slice(0,-1)):B.cacheLog((()=>{B.warn(e,t,o,...a,{isCached:!0})}))}static customLabel(e,t,o,...a){e<=B.logLevel?console.log("%c "+B.logBrand+" %c %c "+t+" %c %c "+o+" %c ",M,"",B.tagLogStyle,"","color: white; background: #a400ff; border-radius: 5px;","",...a):B.cacheLog((()=>{B.customLabel(e,t,o,...a)}))}static image(e,t){e<=B.logLevel?console.log("%c+","font-size: 1px; padding: 20px 80px; line-height: 45px; background: url("+t+"); background-size: 160px 90px; color: transparent;"):B.cacheLog((()=>{B.image(e,t)}))}static releaseAllLogs(){var e=T.get(i),t=e.length;const o=e;if(T.set(i,[]),0<t){B.log(0,"Logger.releaseAllLogs","<---- HISTORICAL LOGS BEGIN ----\x3e");for(let e=0;e<t;e++)o[e]();B.log(0,"Logger.releaseAllLogs","<---- HISTORICAL LOGS END ----\x3e")}}static setLogBrand(e){B.logBrand=e}static setBrandColor(e){M="color: white; background: "+e+"; border-radius: 5px;"}static cacheLog(e){let t=T.get(i);null==t&&(t=[]),t.push(e),T.set(i,t)}}B.baseLogTag="Logger",B.logBrand="MoEngage",B.logLevel=0,B.tagLogStyle="color: white; background: #48beab; border-radius: 5px;";class K{static set(e,t){var o;null!==(o=U.get())&&void 0!==o&&o.disableCookies||(o=K.baseTag+".set",null==t?K.remove(e):(t="boolean"==typeof t?JSON.stringify({actualValue:t,MOE_DATA_TYPE:"boolean"}):"string"==typeof t?JSON.stringify({actualValue:t,MOE_DATA_TYPE:"string"}):JSON.stringify(t),B.log(3,o,"Setting ",e,":",t),o=Date.now(),o=";expires="+new Date(o+31536e6*l).toUTCString(),document.cookie=e+"="+encodeURIComponent(t)+o+";domain="+K.getOrigin()+";path=/;SameSite=None; Secure"))}static get(t){var o;if(null===(o=U.get())||void 0===o||!o.disableCookies){var a=K.baseTag+".get",n=t+"=",s=decodeURIComponent(document.cookie).split(";");for(let i=s.length-1;0<=i;i--){let r=s[i];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(n)){let s=r.substring(n.length,r.length);try{s=JSON.parse(s),"string"===e(s,"MOE_DATA_TYPE",null)?(s=e(s,"actualValue",null),s=s?String(s):null):"boolean"===e(s,"MOE_DATA_TYPE",null)&&(s=e(s,"actualValue",null))}catch(o){}return B.log(3,a,"Got ",t,":",s),s}}return null}}static remove(e){var t;null!==(t=U.get())&&void 0!==t&&t.disableCookies||(t=K.baseTag+".remove",document.cookie=e+"=;domain="+K.getOrigin()+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",B.log(3,t,"Removed ",e))}static setRaw(e,t,o){if(null===(a=U.get())||void 0===a||!a.disableCookies){var a=K.baseTag+".setRaw";if(null==t)K.remove(e);else{B.log(3,a,"Setting ",e,":",t);let n="";null!=o&&(n=";expires="+o.toISOString()),document.cookie=e+"="+encodeURIComponent(t)+n+";domain="+K.getOrigin()+";path=/;"}}}static getOrigin(){if(null===(e=U.get())||void 0===e||!e.disableCookies){var e=K.baseTag+".getOrigin";let t=window.location.origin;return t=t.indexOf(".")!==t.lastIndexOf(".")?t.substring(t.indexOf(".")):"."+t.substring(t.lastIndexOf("/")+1),"localhost"===window.location.hostname&&(B.warn(1,e,"Cross domain user persitence will not work with localhost. \n\nWe will save the key-value pairs in the localhost cookie store for reference. You'll be able to test this functionality in a hosted staging/test environment."),t=""),t}}}K.baseTag="CookieStorage";var H=()=>{const e=window.location.search.substring(1).split("&"),t={};for(let s=0;s<e.length;s++){var o=e[s].split("="),a=decodeURIComponent(o[0]),n=decodeURIComponent(o[1]);void 0===t[a]?t[a]=decodeURIComponent(n):"string"==typeof t[a]?(o=[t[a],decodeURIComponent(n)],t[a]=o):t[a].push(decodeURIComponent(n))}return t};window.getParams=H;function W(e,t,o){document.cookie=e+"="+t+";expires="+o.toUTCString()+";domain=.moengage.com;path=/;SameSite=None; Secure"}!function(t){if(e(t,"action")&&"inapp_test"===t.action){var o=t.redirect_url,a=t.draft_id,n=t.draft_campaign_tag,s=t.draft_type||d,i=t.template_type||null,r=t.campaign_meta||null,l=t.locale||null;if(t=t.variation||null,null!=o)if(null!=a){if(s!==d||null!=n){const e=new Date;return e.setTime(e.getTime()+3e4),W(p,s,e),W(h,a,e),W(m,n,e),W(S,r,e),W(_,i,e),W(b,l,e),W(f,t,e),window.location.href=o}console.error("Please specify a 'draft_campaign_tag' in the queryParams")}else console.error("Please specify a 'draft_id' in the queryParams");else console.error("Please specify a 'redirect_url' in the queryParams")}}(H()),n.listenToChannel("inapp_helper","COOKIE_STORAGE",((e,t)=>{if(e.message&&"GET"===e.message.TYPE)if(e.message.KEY===h)if(null==(e=K.get(h)))t();else try{t({draft_type:K.get(p),draft_id:e,draft_tag:K.get(m),campaign_meta:K.get(S),template_type:K.get(_),locale:K.get(b),variation:K.get(f)})}catch(e){console.error(e),t()}else t()})),window.getParams=H})()})();